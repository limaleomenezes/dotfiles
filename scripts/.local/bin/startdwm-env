#!/bin/sh

services='dunst
dwmblocks
picom
redshift
sxhkd'
programs='chromium
firefox'

env_init() {
	printf '%s\n' "$services" | while IFS= read -r service; do
		"$service" >/dev/null 2>&1 & disown
	done
	printf '%s\n' "$programs" | while IFS= read -r program; do
		"$program" >/dev/null 2>&1 & disown
	done
}

env_kill() {
	printf '%s\n' "$services" | while IFS= read -r service; do
		pkill -9 "$service" >/dev/null
	done
	printf '%s\n' "$programs" | while IFS= read -r program; do
		pkill -SIGTERM "$program" >/dev/null
	done
}

case "$1" in
	--logout )
		env_kill
		pkill dwm
		;;
	--poweroff )
		env_kill
		systemctl poweroff
		;;
	--reboot )
		env_kill
		systemctl reboot
		;;
	--restart )
		env_kill
		env_init
		;;
	* )
		env_init
		;;
esac
